<!DOCTYPE html>
<html>
<head>
	<title>Api</title>

</head>
<body>
	<div>Content types: <a href="/xml">xml</a> | <a href="html.html">html</a>
		| <a href="json.html">json</a>| <a href="ul.html">ul</a>
		| <a href="indefinido.html">indefinido</a>
		| <a href="LoRa.html">LoRa</a>
		| <a href="teros.html">Teros</a></div>
		<script>
			if ('geolocation' in navigator){
				console.log('geolocation available');
				navigator.geolocation.getCurrentPosition(async position => {
					lat = position.coords.latitude;
					lon = position.coords.longitude;
					console.log(lat, lon);
					document.getElementById('latitude').textContent = lat;
					document.getElementById('longitude').textContent = lon;

					const data = {lat, lon};
					const options = {
						method: 'POST',
						headers:{
							'Content-Type':'application/json'
						},
						body: JSON.stringify(data)
					};
					const response = await fetch('/api', options);
					const json = await response.json();

					console.log(json);

				});
			}else{
				console.log('geolocation not available');
			}
		</script>
		<p>
			latitude: <span id="latitude"></span>&deg;<br />
			longitude: <span id="longitude"></span>&deg;
		</p>
	</body>
	</html>
